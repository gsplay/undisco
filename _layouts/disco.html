<!DOCTYPE html>
<html lang="es">
<head>

<!-- Google tag -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YWL3JCT910"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-YWL3JCT910');
</script>

<meta charset="utf-8">

<title>{{ page.title }} — {{ page.artist }} | undisco</title>

<meta name="description"
      content="Un disco para escuchar completo: {{ page.title }} de {{ page.artist }} ({{ page.year }})." />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="theme-color" content="#0e0e0e">

<!-- ===== Open Graph ===== -->

<meta property="og:type" content="music.album">
<meta property="og:site_name" content="undisco.org">

<meta property="og:title"
      content="{{ page.title }} — {{ page.artist }}">

<meta property="og:description"
      content="Un disco para escuchar completo. {{ page.year }} · {{ page.genre }}">

<meta property="og:url"
      content="{{ site.url }}{{ site.baseurl }}{{ page.url }}">

{% if page.cover %}
<meta property="og:image"
      content="{{ site.url }}{{ site.baseurl }}{{ page.cover }}?v={{ page.date | date: '%s' }}">
<meta property="og:image:alt"
      content="Portada de {{ page.title }} de {{ page.artist }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1200">
{% endif %}

<!-- ===== Twitter / X ===== -->

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title"
      content="{{ page.title }} — {{ page.artist }}">
<meta name="twitter:description"
      content="Un disco para escuchar completo. {{ page.year }} · {{ page.genre }}">
<meta name="twitter:image"
      content="{{ site.url }}{{ site.baseurl }}{{ page.cover }}?v={{ page.date | date: '%s' }}">
<meta name="twitter:image:alt"
      content="Portada de {{ page.title }} de {{ page.artist }}">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #0e0e0e;
  --fg: #eaeaea;
  --border: rgba(255,255,255,0.35);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--fg);
  font-family: 'Montserrat', system-ui, sans-serif;
  min-height: 100vh;
}

main.disco-entry {
  min-height: 100vh;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.cover {
  width: 100%;
  display: flex;
  justify-content: center;
  margin-bottom: 16px;
}

.cover img {
  width: 62%;
  max-width: 220px;
  border: 1px solid var(--border);
  padding: 6px;
  background: #000;
}

.content {
  width: 100%;
  max-width: 420px;
  text-align: center;
}

h1 {
  font-size: 1.75rem;
  font-weight: 500;
  margin-bottom: 6px;
}

.artist {
  font-size: 1.05rem;
  opacity: 0.85;
  margin-bottom: 6px;
}

.meta {
  font-size: 0.95rem;
  opacity: 0.65;
  margin-bottom: 20px;
}

.primary-actions {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 20px;
}

.listen {
  padding: 14px 32px;
  border: 1px solid var(--fg);
  color: var(--fg);
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-size: 0.8rem;
}

.listen:hover {
  background: var(--fg);
  color: var(--bg);
}

.share {
  width: 52px;
  border: 1px solid var(--fg);
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
}

.share img {
  width: 18px;
  height: 18px;
  filter: invert(1);
}

.secondary {
  font-size: 0.75rem;
  opacity: 0.5;
  margin-top: 8px;
}
</style>

</head>

<body>

<main class="disco-entry">

{% if page.cover %}
<div class="cover">
  <img src="{{ site.baseurl }}{{ page.cover }}"
       alt="Portada de {{ page.title }} de {{ page.artist }}">
</div>
{% endif %}

<article class="content">
  <h1>{{ page.title }}</h1>
  <div class="artist">{{ page.artist }}</div>
  <div class="meta">{{ page.year }} · {{ page.genre }}</div>

  <div class="primary-actions">
    {% if page.listen %}
    <a href="{{ page.listen }}" class="listen" target="_blank" rel="noopener">Escuchar</a>
    {% endif %}

    <button class="share" id="shareBtn" aria-label="Compartir">
      <img src="{{ site.baseurl }}/assets/img/share.svg" alt="Compartir">
    </button>
  </div>

  <div class="secondary">
    <a href="{{ site.baseurl }}/">Home</a>
  </div>
</article>

</main>

<script>
const btn = document.getElementById('shareBtn');

if (btn) {
  btn.addEventListener('click', async () => {
    const data = {
      title: "{{ page.title }} — {{ page.artist }}",
      text: "Un disco para escuchar completo.",
      url: window.location.href
    };

    if (navigator.share) {
      try { await navigator.share(data); } catch(e){}
    } else {
      await navigator.clipboard.writeText(window.location.href);
      alert("Link copiado");
    }
  });
}
</script>

</body>
</html>
